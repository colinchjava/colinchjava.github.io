---
layout: post
title: "Deploying Java applications with Docker Compose"
description: " "
date: 2023-09-22
tags: [docker]
comments: true
share: true
---

In modern software development, containerization has become an essential practice for streamlining deployment and ensuring consistency across various environments. Docker has emerged as one of the popular containerization solutions, allowing developers to package their applications and dependencies into isolated containers.

In this blog post, we will explore how to deploy Java applications using Docker Compose. Docker Compose is a tool that enables us to define and run multi-container applications using a YAML file.

## Prerequisites

Before getting started, ensure that you have the following prerequisites:

1. Docker: Ensure that Docker is installed and running on your system. You can download Docker from the official website and follow the installation instructions based on your operating system.

## Step 1: Creating a Dockerfile

The first step is to create a `Dockerfile` that defines the Docker image for our Java application. The `Dockerfile` includes the necessary steps to build the image, install Java, and copy the application files.

```dockerfile
# Dockerfile

# Base image
FROM openjdk:11-jdk

# Set the working directory
WORKDIR /app

# Copy the application jar
COPY target/my-java-app.jar /app/app.jar

# Expose the application port
EXPOSE 8080

# Define the command to run the application
CMD ["java", "-jar", "app.jar"]
```

Let's break down the `Dockerfile`:

- `FROM openjdk:11-jdk`: Specifies the base image as OpenJDK 11, which provides the Java runtime environment.
- `WORKDIR /app`: Sets the working directory inside the container to `/app`.
- `COPY target/my-java-app.jar /app/app.jar`: Copies the `my-java-app.jar` file from the `target` directory (assuming it is generated by your build system) to the `/app` directory inside the container.
- `EXPOSE 8080`: Instructs Docker to expose port 8080 for incoming connections.
- `CMD ["java", "-jar", "app.jar"]`: Defines the command that will be executed when the container starts.

## Step 2: Creating a docker-compose.yml file

Next, we need to create a `docker-compose.yml` file that will define the services and configurations for our Docker containers. In this example, we'll create a single service for our Java application.

```yaml
# docker-compose.yml

version: '3'
services:
  my-java-app:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - 8080:8080
    restart: always
```

Let's break down the `docker-compose.yml` file:

- `version: '3'`: Specifies the version of the Docker Compose file format.
- `my-java-app`: Defines the service name for our Java application. It can be any name you choose.
- `build`: Instructs Docker Compose to build the image using the `Dockerfile` in the current directory (`.`).
- `ports`: Maps the host port `8080` to the container port `8080`.
- `restart: always`: Configures the service to automatically restart if any issues occur.

## Step 3: Deploying the Java application

Now that we have our `Dockerfile` and `docker-compose.yml` defined, we can deploy our Java application using Docker Compose. Follow these steps:

1. Open a terminal or command prompt and navigate to the directory where the `docker-compose.yml` file is located.
2. Run the following command to build the image and start the container:

    ```shell
    docker-compose up -d
    ```

   The `-d` flag runs the containers in the background.

3. Docker Compose will fetch the base image, build the Java application image, and start the container. You should see the logs indicating the container is up and running.

4. Access the Java application by navigating to `http://localhost:8080` in your web browser.

## Summary

In this blog post, we explored how to deploy Java applications using Docker Compose. By following the steps outlined above, you can easily containerize your Java applications and deploy them consistently across different environments.

#docker #java #devops